<div class="row">
    <div class="col-md-12">
        <div class="blockAiAssistantFolder">
            {{#sections}}
                <div class="blockAiAssistant" data-id="{{idname}}"><i
                        class="fa fa-folder blockAiAssistantFolderIcon"></i> {{name}} ({{number_of_modules}})
                </div>
                <div class="blockAiAssistantContent-{{idname}} mb-1" style="display: none;">
                    <input type="checkbox" id="selectAll-{{idname}}" data-idname="{{idname}}"
                           class="select-all-checkbox">
                    <label for="selectAll-{{idname}}">Select All</label>
                    {{#modules}}
                        <div class="activitytitle media modtype_{{modname}} position-relative align-self-start mt-1 mb-1">
                            <label>
                                <div class="d-flex align-items-center">

                                    <input
                                            id="block-aia-{{cmid}}"
                                            type="checkbox"
                                            class="courseModuleCheckbox module-checkbox-{{idname}} align-self-start mr-3"
                                            data-section="{{idname}}"
                                            data-filename="{{#content}}{{file_name}}{{/content}}"
                                            data-content="{{#content}}{{content}}{{/content}}"
                                            data-cmid="{{cmid}}"
                                            data-instanceid="{{instanceid}}"
                                            data-modname="{{modname}}"
                                            data-courseid="{{courseid}}"
                                            {{#trained}}
                                                disabled
                                            {{/trained}}
                                    >
                                    <span class="activityiconcontainer {{icontype}} courseicon align-self-start mr-3"
                                          style="width: 24px; height:24px;">
                                    <!--<img src="http://localhost:8180/theme/image.php/moove/page/1722556551/monologo?filtericon=1" class="activityicon " alt="Page icon">-->

                                    <img src="{{icon}}?filtericon=1" class="activityicon " alt="{{modname}} icon">

                                </span>
                                    <span class="activityname">
                                        {{name}} <span id="block-aia-trained-status-{{cmid}}"{{{trained}}}</span>
                                    </span>
                                    {{#trained}}
                                        <button id="block-aia-delete-button-{{cmid}}"
                                                type="button"
                                                class="ai-aisstant-delete-content btn btn-link"
                                                data-block_aia_cmid="{{block_aia_course_moduel_id}}"
                                                data-cmid="{{cmid}}"
                                        >
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    {{/trained}}
                                </div>
                            </label>
                        </div>
                    {{/modules}}
                </div>
            {{/sections}}
        </div>
    </div>
</div>

<script>

    function enableSelectAll() {
        // In plain JS, when the checkbox with class select-all-checkbox is clicked, we want to capture attribute data-idname
        // and select/deselect all checboxes with data-section equal to data-idname
        document.querySelectorAll('.select-all-checkbox').forEach(function (checkbox) {
            checkbox.addEventListener('click', function () {

                var idname = this.getAttribute('data-idname');
                var checkboxes = document.querySelectorAll('.module-checkbox-' + idname);
                checkboxes.forEach(function (checkbox) {
                    // if the checkbox is checked, uncheck it, otherwise check it
                    checkbox.checked = !checkbox.checked;
                });
            });
        });
    }

    enableSelectAll();

</script>
