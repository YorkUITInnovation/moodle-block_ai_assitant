{"version":3,"file":"course_modules.min.js","sources":["../src/course_modules.js"],"sourcesContent":["import notification from 'core/notification';\nimport ajax from 'core/ajax';\nimport * as Str from 'core/str';\n\nexport const init = () => {\n    display_modules();\n};\n\n/**\n * Display course modules\n */\nfunction display_modules() {\n    document.getElementById('btn-ai-assistant-train-modules').addEventListener('click', function () {\n        // get data-courseid from current element\n        var courseid = this.getAttribute('data-courseid');\n\n        var display_modules = ajax.call([{\n            methodname: 'block_ai_assistant_display_course_modules',\n            args: {\n                'courseid': courseid\n            }\n        }]);\n\n        display_modules[0].done(function (results) {\n            // Pop up notificaiton to confirm delete\n            notification.confirm(Str.get_string('train_course_assistant', 'block_ai_assistant'),\n                results,\n                Str.get_string('save', 'block_ai_assistant'),\n                Str.get_string('cancel', 'block_ai_assistant'), function () {\n                    // Get all checkboxes with class courseModuleCheckbox and store the attribute data-filename,\n                    // data-content, datacourseid for each checked checkbox\n                    var checkboxes = document.querySelectorAll('.courseModuleCheckbox');\n                    var selected_modules = [];\n                    checkboxes.forEach(function (checkbox) {\n                        if (checkbox.checked) {\n                            selected_modules.push({\n                                'filename': checkbox.getAttribute('data-filename'),\n                                'content': checkbox.getAttribute('data-content'),\n                                'courseid': checkbox.getAttribute('data-courseid'),\n                                'cmid': checkbox.getAttribute('data-cmid'),\n                                'modname': checkbox.getAttribute('data-modname'),\n                            });\n                            //make a new ajax call to a new webservice that calls insert from course_module class\n                            //block_ai_assistant_insert_course_modules\n                            var insert_modules = ajax.call([{\n                                methodname: 'block_ai_assistant_insert_course_modules',\n                                args: {\n                                    'courseid': courseid,\n                                    'selected_modules': selected_modules\n                                }\n\n                            }]);\n                            insert_modules[0].done(function (response) {\n                                alert(\"Successfully added, record id is: \" + response);\n                                // You can now use the data variable for further processing\n                            }).fail(function (error) {\n                                alert(\"error in ajax call of insert modules\" + error);\n                            });\n                        }\n                    });\n\n\n                    // var save_content = ajax.call([{\n                    //     methodname: 'block_ai_assistant_some_new_method',\n                    //     args: {\n                    //         'courseid': courseid\n                    //     }\n                    // }]);\n                    //\n                    // save_content[0].done(function () {\n                    //\n                    // }).fail(function () {\n                    //     alert('An error has occurred. The record was not deleted');\n                    // });\n                });\n\n            // Time out required so that components can be discovered\n            setTimeout(function () {\n                // Get all elements with the class 'blockAiAssistant'\n                var blocks = document.querySelectorAll('.blockAiAssistant');\n                // Add click event listener to each block\n                blocks.forEach(function (block) {\n                    block.addEventListener('click', function () {\n                        // Get the data-id of the clicked block\n                        var dataId = this.getAttribute('data-id');\n\n                        // Construct the class name of the corresponding content block\n                        var contentClassName = 'blockAiAssistantContent-' + dataId;\n\n                        // Get the content block element\n                        var contentBlock = document.querySelector('.' + contentClassName);\n\n                        var folderIcon = this.querySelector('.blockAiAssistantFolderIcon');\n\n                        // Toggle the display property of the content block\n                        if (contentBlock.style.display === 'none' || contentBlock.style.display === '') {\n                            contentBlock.style.display = 'block';\n                            // Change the icon to a folder open icon\n                            folderIcon.classList.remove('fa-folder');\n                            folderIcon.classList.add('fa-folder-open');\n                        } else {\n                            contentBlock.style.display = 'none';\n                            // Change the icon to a folder closed icon\n                            folderIcon.classList.remove('fa-folder-open');\n                            folderIcon.classList.add('fa-folder');\n                        }\n                    });\n                });\n            }, 1000);\n\n        }).fail(function () {\n            alert('An error has occurred. Cannot display data');\n        });\n\n    });\n}\n\n\n"],"names":["document","getElementById","addEventListener","courseid","this","getAttribute","ajax","call","methodname","args","done","results","confirm","Str","get_string","checkboxes","querySelectorAll","selected_modules","forEach","checkbox","checked","push","response","alert","fail","error","setTimeout","block","contentClassName","contentBlock","querySelector","folderIcon","style","display","classList","remove","add"],"mappings":"4zCAIoB,KAQhBA,SAASC,eAAe,kCAAkCC,iBAAiB,SAAS,eAE5EC,SAAWC,KAAKC,aAAa,iBAEXC,cAAKC,KAAK,CAAC,CAC7BC,WAAY,4CACZC,KAAM,UACUN,aAIJ,GAAGO,MAAK,SAAUC,+BAEjBC,QAAQC,IAAIC,WAAW,yBAA0B,sBAC1DH,QACAE,IAAIC,WAAW,OAAQ,sBACvBD,IAAIC,WAAW,SAAU,uBAAuB,eAGxCC,WAAaf,SAASgB,iBAAiB,yBACvCC,iBAAmB,GACvBF,WAAWG,SAAQ,SAAUC,UACrBA,SAASC,UACTH,iBAAiBI,KAAK,UACNF,SAASd,aAAa,yBACvBc,SAASd,aAAa,yBACrBc,SAASd,aAAa,sBAC1Bc,SAASd,aAAa,qBACnBc,SAASd,aAAa,kBAIhBC,cAAKC,KAAK,CAAC,CAC5BC,WAAY,2CACZC,KAAM,UACUN,0BACQc,qBAIb,GAAGP,MAAK,SAAUY,UAC7BC,MAAM,qCAAuCD,aAE9CE,MAAK,SAAUC,OACdF,MAAM,uCAAyCE,iBAqBnEC,YAAW,WAEM1B,SAASgB,iBAAiB,qBAEhCE,SAAQ,SAAUS,OACrBA,MAAMzB,iBAAiB,SAAS,eAKxB0B,iBAAmB,2BAHVxB,KAAKC,aAAa,WAM3BwB,aAAe7B,SAAS8B,cAAc,IAAMF,kBAE5CG,WAAa3B,KAAK0B,cAAc,+BAGD,SAA/BD,aAAaG,MAAMC,SAAqD,KAA/BJ,aAAaG,MAAMC,SAC5DJ,aAAaG,MAAMC,QAAU,QAE7BF,WAAWG,UAAUC,OAAO,aAC5BJ,WAAWG,UAAUE,IAAI,oBAEzBP,aAAaG,MAAMC,QAAU,OAE7BF,WAAWG,UAAUC,OAAO,kBAC5BJ,WAAWG,UAAUE,IAAI,sBAItC,QAEJZ,MAAK,WACJD,MAAM"}