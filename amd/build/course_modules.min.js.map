{"version":3,"file":"course_modules.min.js","sources":["../src/course_modules.js"],"sourcesContent":["import notification from 'core/notification';\nimport ajax from 'core/ajax';\nimport * as Str from 'core/str';\nimport jQuery from 'jquery';\n\nexport const init = () => {\n    // display_modules();\n};\n/**\nfunction display_modules() {\n    document.getElementById('btn-ai-assistant-train-modules').addEventListener('click', function () {\n        // get data-courseid from current element\n        var courseid = this.getAttribute('data-courseid');\n\n        var display_modules = ajax.call([{\n            methodname: 'block_ai_assistant_display_course_modules',\n            args: {\n                'courseid': courseid\n            }\n        }]);\n\n        display_modules[0].done(function (results) {\n            // Pop up notificaiton to confirm delete\n            notification.confirm(Str.get_string('train_course_assistant', 'block_ai_assistant'),\n                results,\n                Str.get_string('save', 'block_ai_assistant'),\n                Str.get_string('cancel', 'block_ai_assistant'), function () {\n                    // Get all checkboxes with class courseModuleCheckbox and store the attribute data-filename, data-content, datacourseid for each checked checkbox\n                    var checkboxes = document.querySelectorAll('.courseModuleCheckbox');\n                    var selected_modules = [];\n                    checkboxes.forEach(function (checkbox) {\n                        if (checkbox.checked) {\n                            selected_modules.push({\n                                'filename': checkbox.getAttribute('data-filename'),\n                                'content': checkbox.getAttribute('data-content'),\n                                'courseid': checkbox.getAttribute('data-courseid'),\n                                'cmid': checkbox.getAttribute('data-cmid'),\n                                'modname': checkbox.getAttribute('data-modname'),\n                            });\n                            //make a new ajax call to a new webservice that calls insert from course_module class\n                            //block_ai_assistant_insert_course_modules\n                            var insert_modules = ajax.call([{\n                                methodname: 'block_ai_assistant_insert_course_modules',\n                                args: {\n                                    'courseid': courseid,\n                                    'selected_modules':selected_modules\n                                }\n\n                            }]);\n                            insert_modules[0].done(function(response){\n                                    console.log(\"response\", response);\n                                    alert(\"Successfully added, record id is: \" + response);\n                                    // You can now use the data variable for further processing\n                            }).fail(function(error){\n                                alert(\"error in ajax call of insert modules\" + error);\n                            });\n                        }\n                    });\n                    console.log(\"selected_module structure\",selected_modules);\n\n\n\n\n\n                    // var save_content = ajax.call([{\n                    //     methodname: 'block_ai_assistant_some_new_method',\n                    //     args: {\n                    //         'courseid': courseid\n                    //     }\n                    // }]);\n                    //\n                    // save_content[0].done(function () {\n                    //\n                    // }).fail(function () {\n                    //     alert('An error has occurred. The record was not deleted');\n                    // });\n                });\n        }).fail(function () {\n            alert('An error has occurred. Cannot display data');\n        });\n\n    });\n}\n */\n\n\n"],"names":["_getRequireWildcardCache","e","WeakMap","r","t","_interopRequireDefault","obj","__esModule","default","_notification","_ajax","Str","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","_interopRequireWildcard","_jquery","_exports","init"],"mappings":"+JAG4B,SAAAA,yBAAAC,GAAA,GAAA,mBAAAC,QAAA,OAAA,KAAA,IAAAC,EAAAD,IAAAA,QAAAE,EAAAF,IAAAA,eAAAF,yBAAA,SAAAC,GAAAA,OAAAA,EAAAG,EAAAD,IAAAF,EAAA,CAAA,SAAAI,uBAAAC,KAAAA,OAAAA,KAAAA,IAAAC,WAAAD,IAAAE,CAAAA,QAAAF,IAAA,8EAH5BG,cAAAJ,uBAAAI,eACAC,MAAAL,uBAAAK,OACAC,IAC4B,SAAAV,EAAAE,GAAAA,IAAAA,GAAAF,GAAAA,EAAAM,kBAAAN,EAAA,GAAA,OAAAA,GAAA,iBAAAA,GAAA,mBAAAA,EAAA,MAAA,CAAAO,QAAAP,GAAA,IAAAG,EAAAJ,yBAAAG,GAAAC,GAAAA,GAAAA,EAAAQ,IAAAX,GAAAG,OAAAA,EAAAS,IAAAZ,GAAAa,IAAAA,GAAAC,UAAA,MAAAC,EAAAC,OAAAC,gBAAAD,OAAAE,yBAAA,IAAA,IAAAC,KAAAnB,EAAA,GAAA,YAAAmB,GAAAH,OAAAI,UAAAC,eAAAC,KAAAtB,EAAAmB,GAAAI,CAAAA,IAAAA,EAAAR,EAAAC,OAAAE,yBAAAlB,EAAAmB,GAAA,KAAAI,IAAAA,EAAAX,KAAAW,EAAAC,KAAAR,OAAAC,eAAAJ,EAAAM,EAAAI,GAAAV,EAAAM,GAAAnB,EAAAmB,EAAA,CAAA,OAAAN,EAAAN,QAAAP,EAAAG,GAAAA,EAAAqB,IAAAxB,EAAAa,GAAAA,CAAA,CAD5BY,CAAAf,KACAgB,QAAAtB,uBAAAsB,SAIEC,SAAAC,KAFkBA,MAElB"}