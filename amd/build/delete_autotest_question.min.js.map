{"version":3,"file":"delete_autotest_question.min.js","sources":["../src/delete_autotest_question.js"],"sourcesContent":["import notification from 'core/notification';\nimport ajax from 'core/ajax';\nimport * as Str from 'core/str';\n\nexport const init = () => {\n    append_add_button();\n    append_upload_button();\n    append_execute_button();\n    delete_autotest_question();\n};\n\n/**\n * Delete a content\n */\nfunction delete_autotest_question() {\n    const buttons = document.querySelectorAll('.block-ai-assistant-delete-auto-test');\n    buttons.forEach(button => {\n        button.addEventListener('click', function () {\n            const row = this.closest('tr');\n            const id = this.getAttribute('data-id');\n            var courseid = this.getAttribute('data-courseid');\n            // Pop up notificaiton to confirm delete\n            notification.confirm(Str.get_string('delete', 'block_ai_assistant'),\n                Str.get_string('delete_question_help', 'block_ai_assistant'),\n                Str.get_string('delete', 'block_ai_assistant'),\n                Str.get_string('cancel', 'block_ai_assistant'), function () {\n                    //Delete the record\n                    var delete_content = ajax.call([{\n                        methodname: 'block_ai_assistant_delete_autotest_question',\n                        args: {\n                            'id': id,\n                            'courseid': courseid\n                        }\n                    }]);\n\n                    delete_content[0].done(function () {\n                        row.parentNode.removeChild(row);\n                    }).fail(function () {\n                        alert('An error has occurred. The record was not deleted');\n                    });\n                });\n        });\n    });\n}\n\n/**\n * Append href to div element with class form-inline\n *\n */\nfunction append_add_button() {\n    const div = document.querySelector('.form-inline');\n    const button = document.createElement('a');\n    // Get element value with name courseid\n    const courseid = document.querySelector('input[name=\"courseid\"]').value;\n\n    button.setAttribute('href', 'edit_autotest_question.php?courseid=' + courseid);\n    button.setAttribute('class', 'btn btn-primary ml-2');\n    button.textContent = 'Add';\n    div.appendChild(button);\n}\n\n/**\n * Append href to div element with class form-inline\n */\nfunction append_upload_button() {\n    const div = document.querySelector('.form-inline');\n    const button = document.createElement('a');\n    // Get element value with name courseid\n    const courseid = document.querySelector('input[name=\"courseid\"]').value;\n\n    button.setAttribute('href', 'autotest_import.php?courseid=' + courseid);\n    button.setAttribute('class', 'btn btn-primary ml-2');\n    button.textContent = 'Upload questions';\n    div.appendChild(button);\n}\n\nfunction append_execute_button() {\n    const div = document.querySelector('.form-inline');\n    const button = document.createElement('a');\n    // Get element value with name courseid\n    const courseid = document.querySelector('input[name=\"courseid\"]').value;\n\n    button.setAttribute('href', 'autotest_exec.php?courseid=' + courseid);\n    button.setAttribute('id', 'block-ai-assistant-execute-auto-test');\n    button.setAttribute('class', 'btn btn-primary ml-2');\n    button.textContent = 'Run AutoTest';\n    div.appendChild(button);\n}"],"names":["_getRequireWildcardCache","e","WeakMap","r","t","_interopRequireDefault","obj","__esModule","default","_notification","_ajax","Str","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","_interopRequireWildcard","_exports","init","div","document","querySelector","button","createElement","courseid","value","setAttribute","textContent","appendChild","append_add_button","append_upload_button","append_execute_button","querySelectorAll","forEach","addEventListener","row","this","closest","id","getAttribute","notification","confirm","get_string","ajax","methodname","args","done","parentNode","removeChild","fail","alert"],"mappings":"wJAEgC,SAAAA,yBAAAC,GAAA,GAAA,mBAAAC,QAAA,OAAA,KAAA,IAAAC,EAAAD,IAAAA,QAAAE,EAAAF,IAAAA,eAAAF,yBAAA,SAAAC,GAAAA,OAAAA,EAAAG,EAAAD,IAAAF,EAAA,CAAA,SAAAI,uBAAAC,KAAAA,OAAAA,KAAAA,IAAAC,WAAAD,IAAAE,CAAAA,QAAAF,IAAA,8EAFhCG,cAAAJ,uBAAAI,eACAC,MAAAL,uBAAAK,OACAC,IAAgC,SAAAV,EAAAE,GAAAA,IAAAA,GAAAF,GAAAA,EAAAM,kBAAAN,EAAA,GAAA,OAAAA,GAAA,iBAAAA,GAAA,mBAAAA,EAAA,MAAA,CAAAO,QAAAP,GAAA,IAAAG,EAAAJ,yBAAAG,GAAAC,GAAAA,GAAAA,EAAAQ,IAAAX,GAAAG,OAAAA,EAAAS,IAAAZ,GAAAa,IAAAA,GAAAC,UAAA,MAAAC,EAAAC,OAAAC,gBAAAD,OAAAE,yBAAA,IAAA,IAAAC,KAAAnB,EAAA,GAAA,YAAAmB,GAAAH,OAAAI,UAAAC,eAAAC,KAAAtB,EAAAmB,GAAAI,CAAAA,IAAAA,EAAAR,EAAAC,OAAAE,yBAAAlB,EAAAmB,GAAA,KAAAI,IAAAA,EAAAX,KAAAW,EAAAC,KAAAR,OAAAC,eAAAJ,EAAAM,EAAAI,GAAAV,EAAAM,GAAAnB,EAAAmB,EAAA,CAAA,OAAAN,EAAAN,QAAAP,EAAAG,GAAAA,EAAAqB,IAAAxB,EAAAa,GAAAA,CAAA,CAAhCY,CAAAf,KAOEgB,SAAAC,KALkBA,MA6CpB,WACI,MAAMC,IAAMC,SAASC,cAAc,gBAC7BC,OAASF,SAASG,cAAc,KAEhCC,SAAWJ,SAASC,cAAc,0BAA0BI,MAElEH,OAAOI,aAAa,OAAQ,uCAAyCF,UACrEF,OAAOI,aAAa,QAAS,wBAC7BJ,OAAOK,YAAc,MACrBR,IAAIS,YAAYN,OACpB,CAtDIO,GA2DJ,WACI,MAAMV,IAAMC,SAASC,cAAc,gBAC7BC,OAASF,SAASG,cAAc,KAEhCC,SAAWJ,SAASC,cAAc,0BAA0BI,MAElEH,OAAOI,aAAa,OAAQ,gCAAkCF,UAC9DF,OAAOI,aAAa,QAAS,wBAC7BJ,OAAOK,YAAc,mBACrBR,IAAIS,YAAYN,OACpB,CApEIQ,GAsEJ,WACI,MAAMX,IAAMC,SAASC,cAAc,gBAC7BC,OAASF,SAASG,cAAc,KAEhCC,SAAWJ,SAASC,cAAc,0BAA0BI,MAElEH,OAAOI,aAAa,OAAQ,8BAAgCF,UAC5DF,OAAOI,aAAa,KAAM,wCAC1BJ,OAAOI,aAAa,QAAS,wBAC7BJ,OAAOK,YAAc,eACrBR,IAAIS,YAAYN,OACpB,CAhFIS,GAQgBX,SAASY,iBAAiB,wCAClCC,SAAQX,SACZA,OAAOY,iBAAiB,SAAS,WAC7B,MAAMC,IAAMC,KAAKC,QAAQ,MACnBC,GAAKF,KAAKG,aAAa,WAC7B,IAAIf,SAAWY,KAAKG,aAAa,iBAEjCC,cAAAA,QAAaC,QAAQxC,IAAIyC,WAAW,SAAU,sBAC1CzC,IAAIyC,WAAW,uBAAwB,sBACvCzC,IAAIyC,WAAW,SAAU,sBACzBzC,IAAIyC,WAAW,SAAU,uBAAuB,WAEvBC,MAAAA,QAAK9B,KAAK,CAAC,CAC5B+B,WAAY,8CACZC,KAAM,CACFP,GAAMA,GACNd,SAAYA,aAIL,GAAGsB,MAAK,WACnBX,IAAIY,WAAWC,YAAYb,IAC/B,IAAGc,MAAK,WACJC,MAAM,oDACV,GACJ,GACR,GAAE,GAjCoB,CA+E7B"}