{"version":3,"file":"delete_autotest_question.min.js","sources":["../src/delete_autotest_question.js"],"sourcesContent":["import notification from 'core/notification';\r\nimport ajax from 'core/ajax';\r\nimport * as Str from 'core/str';\r\n\r\nexport const init = () => {\r\n    append_add_button();\r\n    append_upload_button();\r\n    append_execute_button();\r\n    delete_autotest_question();\r\n};\r\n\r\n/**\r\n * Delete a content\r\n */\r\nfunction delete_autotest_question() {\r\n    const buttons = document.querySelectorAll('.block-ai-assistant-delete-auto-test');\r\n    buttons.forEach(button => {\r\n        button.addEventListener('click', function () {\r\n            const row = this.closest('tr');\r\n            const id = this.getAttribute('data-id');\r\n            var courseid = this.getAttribute('data-courseid');\r\n            // Pop up notificaiton to confirm delete\r\n            notification.confirm(Str.get_string('delete', 'block_ai_assistant'),\r\n                Str.get_string('delete_question_help', 'block_ai_assistant'),\r\n                Str.get_string('delete', 'block_ai_assistant'),\r\n                Str.get_string('cancel', 'block_ai_assistant'), function () {\r\n                    //Delete the record\r\n                    var delete_content = ajax.call([{\r\n                        methodname: 'ai_assistant_delete_autotest_question',\r\n                        args: {\r\n                            'id': id,\r\n                            'courseid': courseid\r\n                        }\r\n                    }]);\r\n\r\n                    delete_content[0].done(function () {\r\n                        row.parentNode.removeChild(row);\r\n                    }).fail(function () {\r\n                        alert('An error has occurred. The record was not deleted');\r\n                    });\r\n                });\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * Append href to div element with class form-inline\r\n *\r\n */\r\nfunction append_add_button() {\r\n    const div = document.querySelector('.form-inline');\r\n    const button = document.createElement('a');\r\n    // Get element value with name courseid\r\n    const courseid = document.querySelector('input[name=\"courseid\"]').value;\r\n\r\n    button.setAttribute('href', 'edit_autotest_question.php?courseid=' + courseid);\r\n    button.setAttribute('class', 'btn btn-primary ml-2');\r\n    button.textContent = 'Add';\r\n    div.appendChild(button);\r\n}\r\n\r\n/**\r\n * Append href to div element with class form-inline\r\n */\r\nfunction append_upload_button() {\r\n    const div = document.querySelector('.form-inline');\r\n    const button = document.createElement('a');\r\n    // Get element value with name courseid\r\n    const courseid = document.querySelector('input[name=\"courseid\"]').value;\r\n\r\n    button.setAttribute('href', 'autotest_import.php?courseid=' + courseid);\r\n    button.setAttribute('class', 'btn btn-primary ml-2');\r\n    button.textContent = 'Upload questions';\r\n    div.appendChild(button);\r\n}\r\n\r\nfunction append_execute_button() {\r\n    const div = document.querySelector('.form-inline');\r\n    const button = document.createElement('a');\r\n    // Get element value with name courseid\r\n    const courseid = document.querySelector('input[name=\"courseid\"]').value;\r\n\r\n    button.setAttribute('href', 'autotest_exec.php?courseid=' + courseid);\r\n    button.setAttribute('id', 'block-ai-assistant-execute-auto-test');\r\n    button.setAttribute('class', 'btn btn-primary ml-2');\r\n    button.textContent = 'Run AutoTest';\r\n    div.appendChild(button);\r\n}"],"names":["div","document","querySelector","button","createElement","courseid","value","setAttribute","textContent","appendChild","append_add_button","append_upload_button","append_execute_button","querySelectorAll","forEach","addEventListener","row","this","closest","id","getAttribute","confirm","Str","get_string","ajax","call","methodname","args","done","parentNode","removeChild","fail","alert"],"mappings":"s0CAIoB,uBA8CVA,IAAMC,SAASC,cAAc,gBAC7BC,OAASF,SAASG,cAAc,KAEhCC,SAAWJ,SAASC,cAAc,0BAA0BI,MAElEH,OAAOI,aAAa,OAAQ,uCAAyCF,UACrEF,OAAOI,aAAa,QAAS,wBAC7BJ,OAAOK,YAAc,MACrBR,IAAIS,YAAYN,QArDhBO,oBA4DMV,IAAMC,SAASC,cAAc,gBAC7BC,OAASF,SAASG,cAAc,KAEhCC,SAAWJ,SAASC,cAAc,0BAA0BI,MAElEH,OAAOI,aAAa,OAAQ,gCAAkCF,UAC9DF,OAAOI,aAAa,QAAS,wBAC7BJ,OAAOK,YAAc,mBACrBR,IAAIS,YAAYN,QAnEhBQ,oBAuEMX,IAAMC,SAASC,cAAc,gBAC7BC,OAASF,SAASG,cAAc,KAEhCC,SAAWJ,SAASC,cAAc,0BAA0BI,MAElEH,OAAOI,aAAa,OAAQ,8BAAgCF,UAC5DF,OAAOI,aAAa,KAAM,wCAC1BJ,OAAOI,aAAa,QAAS,wBAC7BJ,OAAOK,YAAc,eACrBR,IAAIS,YAAYN,QA/EhBS,GAQgBX,SAASY,iBAAiB,wCAClCC,SAAQX,SACZA,OAAOY,iBAAiB,SAAS,iBACvBC,IAAMC,KAAKC,QAAQ,MACnBC,GAAKF,KAAKG,aAAa,eACzBf,SAAWY,KAAKG,aAAa,uCAEpBC,QAAQC,IAAIC,WAAW,SAAU,sBAC1CD,IAAIC,WAAW,uBAAwB,sBACvCD,IAAIC,WAAW,SAAU,sBACzBD,IAAIC,WAAW,SAAU,uBAAuB,WAEvBC,cAAKC,KAAK,CAAC,CAC5BC,WAAY,wCACZC,KAAM,IACIR,YACMd,aAIL,GAAGuB,MAAK,WACnBZ,IAAIa,WAAWC,YAAYd,QAC5Be,MAAK,WACJC,MAAM"}