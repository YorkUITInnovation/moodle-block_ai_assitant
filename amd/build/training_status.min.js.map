{"version":3,"file":"training_status.min.js","sources":["../src/training_status.js"],"sourcesContent":["import ajax from 'core/ajax';\n\nexport const init = () => {\n    get_training_status();\n    get_question_training_status();\n};\n\n/**\n * Delete a content\n */\nfunction get_training_status() {\n    // Get element value for element with id block-ai_assistant-training-status-id\n    var statusElement = document.getElementById('block-ai_assistant-training-status-id');\n    // Get cria_file_id from data atrribute in statusId element\n    var courseId = statusElement.getAttribute('data-course_id');\n    // Get statusId from element value\n    var statusId = statusElement.value;\n\n    // if statusId does not equal 1, repeat the ajax call every 10 seconds that checks the training staus\n    // if statusId equals 1, stop the ajax call\n    if (statusId !== \"4\" && statusId !== \"1\") {\n        setInterval(function () {\n            var get_status = ajax.call([{\n                methodname: 'block_ai_assistant_get_training_status',\n                args: {\n                    'courseid': courseId\n                }\n            }]);\n\n            get_status[0].done(function (data) {\n                // Convert data from JSON to object\n                data = JSON.parse(data);\n                // Update the element value for element with id block-ai_assistant-training-status-id\n                document.getElementById('block-ai_assistant-training-status-id').value = data.training_status_id;\n                // Update the element value for element with id block-ai-assistant-training-status\n                document.getElementById('block-ai-assistant-training-status').innerHTML = data.training_status;\n                // Exit setInterval\n                if (data.training_status_id === 1) {\n                    clearInterval();\n                }\n            }).fail(function () {\n                alert('An error has occurred. Could not update the training status');\n            });\n        }, 5000);\n    }\n}\n\n/**\n * Delete a content\n */\nfunction get_question_training_status() {\n    // Get element value for element with id block-ai_assistant-training-status-id\n    var statusElement = document.getElementById('block-ai_assistant-question-training-status-id');\n    // Get cria_file_id from data atrribute in statusId element\n    var questionId = statusElement.getAttribute('data-question_id');\n    // Get statusId from element value\n    var statusId = statusElement.value;\n\n    // if statusId does not equal 1, repeat the ajax call every 10 seconds that checks the training staus\n    // if statusId equals 1, stop the ajax call\n    if (statusId !== \"4\" && statusId !== \"1\") {\n        setInterval(function () {\n            var get_status = ajax.call([{\n                methodname: 'block_ai_assistant_get_question_training_status',\n                args: {\n                    'questionid': questionId\n                }\n            }]);\n\n            get_status[0].done(function (data) {\n                // Convert data from JSON to object\n                data = JSON.parse(data);\n                // Update the element value for element with id block-ai_assistant-training-status-id\n                document.getElementById('block-ai_assistant-question-training-status-id').value = data.training_status_id;\n                // Update the element value for element with id block-ai-assistant-training-status\n                document.getElementById('block-ai-assistant-question-training-status').innerHTML = data.training_status;\n                // Exit setInterval\n                if (data.training_status_id === 1) {\n                    clearInterval();\n                }\n            }).fail(function () {\n                alert('An error has occurred. Could not update the training status');\n            });\n        }, 5000);\n    }\n}"],"names":["statusElement","courseId","statusId","document","getElementById","getAttribute","value","setInterval","ajax","call","methodname","args","done","data","JSON","parse","training_status_id","innerHTML","training_status","clearInterval","fail","alert","questionId","get_question_training_status"],"mappings":"qPAEoB,SAUZA,cAEAC,SAEAC,SAJAF,cAAgBG,SAASC,eAAe,yCAExCH,SAAWD,cAAcK,aAAa,kBAMzB,OAJbH,SAAWF,cAAcM,QAIQ,MAAbJ,UACpBK,aAAY,WACSC,cAAKC,KAAK,CAAC,CACxBC,WAAY,yCACZC,KAAM,UACUV,aAIT,GAAGW,MAAK,SAAUC,MAEzBA,KAAOC,KAAKC,MAAMF,MAElBV,SAASC,eAAe,yCAAyCE,MAAQO,KAAKG,mBAE9Eb,SAASC,eAAe,sCAAsCa,UAAYJ,KAAKK,gBAE/C,IAA5BL,KAAKG,oBACLG,mBAELC,MAAK,WACJC,MAAM,oEAEX,oBASHrB,cAAgBG,SAASC,eAAe,kDAExCkB,WAAatB,cAAcK,aAAa,oBAExCH,SAAWF,cAAcM,MAIZ,MAAbJ,UAAiC,MAAbA,UACpBK,aAAY,WACSC,cAAKC,KAAK,CAAC,CACxBC,WAAY,kDACZC,KAAM,YACYW,eAIX,GAAGV,MAAK,SAAUC,MAEzBA,KAAOC,KAAKC,MAAMF,MAElBV,SAASC,eAAe,kDAAkDE,MAAQO,KAAKG,mBAEvFb,SAASC,eAAe,+CAA+Ca,UAAYJ,KAAKK,gBAExD,IAA5BL,KAAKG,oBACLG,mBAELC,MAAK,WACJC,MAAM,oEAEX,KA/EPE"}