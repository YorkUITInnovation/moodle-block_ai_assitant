{"version":3,"file":"training_status.min.js","sources":["../src/training_status.js"],"sourcesContent":["import notification from 'core/notification';\nimport ajax from 'core/ajax';\nimport * as Str from 'core/str';\n\nexport const init = () => {\n    get_training_status();\n    get_question_training_status();\n};\n\n/**\n * Delete a content\n */\nfunction get_training_status() {\n    // Get element value for element with id block-ai_assistant-training-status-id\n    var statusElement = document.getElementById('block-ai_assistant-training-status-id');\n    // Get cria_file_id from data atrribute in statusId element\n    var courseId = statusElement.getAttribute('data-course_id');\n    // Get statusId from element value\n    var statusId = statusElement.value;\n\n    // if statusId does not equal 1, repeat the ajax call every 10 seconds that checks the training staus\n    // if statusId equals 1, stop the ajax call\n    console.log(statusId);\n    if (statusId !== \"4\" && statusId !== \"1\") {\n        setInterval(function () {\n            var get_status = ajax.call([{\n                methodname: 'block_ai_assistant_get_training_status',\n                args: {\n                    'courseid': courseId\n                }\n            }]);\n\n            get_status[0].done(function (data) {\n                // Convert data from JSON to object\n                data = JSON.parse(data);\n                // Update the element value for element with id block-ai_assistant-training-status-id\n                document.getElementById('block-ai_assistant-training-status-id').value = data.training_status_id;\n                // Update the element value for element with id block-ai-assistant-training-status\n                document.getElementById('block-ai-assistant-training-status').innerHTML = data.training_status;\n                // Exit setInterval\n                if (data.training_status_id === 1) {\n                    clearInterval();\n                }\n            }).fail(function () {\n                alert('An error has occurred. Could not update the training status');\n            });\n        }, 5000);\n    }\n}\n\nfunction get_question_training_status() {\n    // Get element value for element with id block-ai_assistant-training-status-id\n    var statusElement = document.getElementById('block-ai_assistant-question-training-status-id');\n    // Get cria_file_id from data atrribute in statusId element\n    var questionId = statusElement.getAttribute('data-question_id');\n    // Get statusId from element value\n    var statusId = statusElement.value;\n\n    // if statusId does not equal 1, repeat the ajax call every 10 seconds that checks the training staus\n    // if statusId equals 1, stop the ajax call\n    if (statusId !== \"4\" && statusId !== \"1\") {\n        setInterval(function () {\n            var get_status = ajax.call([{\n                methodname: 'block_ai_assistant_get_question_training_status',\n                args: {\n                    'questionid': questionId\n                }\n            }]);\n\n            get_status[0].done(function (data) {\n                // Convert data from JSON to object\n                data = JSON.parse(data);\n                // Update the element value for element with id block-ai_assistant-training-status-id\n                document.getElementById('block-ai_assistant-question-training-status-id').value = data.training_status_id;\n                // Update the element value for element with id block-ai-assistant-training-status\n                document.getElementById('block-ai-assistant-question-training-status').innerHTML = data.training_status;\n                // Exit setInterval\n                if (data.training_status_id === 1) {\n                    clearInterval();\n                }\n            }).fail(function () {\n                alert('An error has occurred. Could not update the training status');\n            });\n        }, 5000);\n    }\n}"],"names":["_getRequireWildcardCache","e","WeakMap","r","t","_interopRequireDefault","obj","__esModule","default","_notification","_ajax","Str","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","_interopRequireWildcard","_exports","init","statusElement","courseId","statusId","document","getElementById","getAttribute","value","console","log","setInterval","ajax","methodname","args","courseid","done","data","JSON","parse","training_status_id","innerHTML","training_status","clearInterval","fail","alert","questionId","questionid","get_question_training_status"],"mappings":"+IAEgC,SAAAA,yBAAAC,GAAA,GAAA,mBAAAC,QAAA,OAAA,KAAA,IAAAC,EAAAD,IAAAA,QAAAE,EAAAF,IAAAA,eAAAF,yBAAA,SAAAC,GAAAA,OAAAA,EAAAG,EAAAD,IAAAF,EAAA,CAAA,SAAAI,uBAAAC,KAAAA,OAAAA,KAAAA,IAAAC,WAAAD,IAAAE,CAAAA,QAAAF,IAAA,8EAFhCG,cAAAJ,uBAAAI,eACAC,MAAAL,uBAAAK,OACAC,IAAgC,SAAAV,EAAAE,GAAAA,IAAAA,GAAAF,GAAAA,EAAAM,kBAAAN,EAAA,GAAA,OAAAA,GAAA,iBAAAA,GAAA,mBAAAA,EAAA,MAAA,CAAAO,QAAAP,GAAA,IAAAG,EAAAJ,yBAAAG,GAAAC,GAAAA,GAAAA,EAAAQ,IAAAX,GAAAG,OAAAA,EAAAS,IAAAZ,GAAAa,IAAAA,GAAAC,UAAA,MAAAC,EAAAC,OAAAC,gBAAAD,OAAAE,yBAAA,IAAA,IAAAC,KAAAnB,EAAA,GAAA,YAAAmB,GAAAH,OAAAI,UAAAC,eAAAC,KAAAtB,EAAAmB,GAAAI,CAAAA,IAAAA,EAAAR,EAAAC,OAAAE,yBAAAlB,EAAAmB,GAAA,KAAAI,IAAAA,EAAAX,KAAAW,EAAAC,KAAAR,OAAAC,eAAAJ,EAAAM,EAAAI,GAAAV,EAAAM,GAAAnB,EAAAmB,EAAA,CAAA,OAAAN,EAAAN,QAAAP,EAAAG,GAAAA,EAAAqB,IAAAxB,EAAAa,GAAAA,CAAA,CAAhCY,CAAAf,KAKEgB,SAAAC,KAHkBA,KAQpB,IAEQC,cAEAC,SAEAC,SAJAF,cAAgBG,SAASC,eAAe,yCAExCH,SAAWD,cAAcK,aAAa,kBAEtCH,SAAWF,cAAcM,MAI7BC,QAAQC,IAAIN,UACK,MAAbA,UAAiC,MAAbA,UACpBO,aAAY,WACSC,MAAAA,QAAKhB,KAAK,CAAC,CACxBiB,WAAY,yCACZC,KAAM,CACFC,SAAYZ,aAIT,GAAGa,MAAK,SAAUC,MAEzBA,KAAOC,KAAKC,MAAMF,MAElBZ,SAASC,eAAe,yCAAyCE,MAAQS,KAAKG,mBAE9Ef,SAASC,eAAe,sCAAsCe,UAAYJ,KAAKK,gBAE/C,IAA5BL,KAAKG,oBACLG,eAER,IAAGC,MAAK,WACJC,MAAM,8DACV,GACH,GAAE,KAIX,WAEI,IAAIvB,cAAgBG,SAASC,eAAe,kDAExCoB,WAAaxB,cAAcK,aAAa,oBAExCH,SAAWF,cAAcM,MAIZ,MAAbJ,UAAiC,MAAbA,UACpBO,aAAY,WACSC,MAAAA,QAAKhB,KAAK,CAAC,CACxBiB,WAAY,kDACZC,KAAM,CACFa,WAAcD,eAIX,GAAGV,MAAK,SAAUC,MAEzBA,KAAOC,KAAKC,MAAMF,MAElBZ,SAASC,eAAe,kDAAkDE,MAAQS,KAAKG,mBAEvFf,SAASC,eAAe,+CAA+Ce,UAAYJ,KAAKK,gBAExD,IAA5BL,KAAKG,oBACLG,eAER,IAAGC,MAAK,WACJC,MAAM,8DACV,GACH,GAAE,IAEX,CA/EIG,EAA8B,CA+EjC"}